import{S as x,i as ee,s as te,k as b,q as O,a as j,l as y,m as I,r as M,h as d,c as N,n as _,J as $,b as L,G as f,M as K,H as G,N as he,y as T,z as U,A as R,O as pe,v as W,d as C,f as X,g as D,B as q,o as be,K as ye,e as ne}from"../chunks/index.e4ba9c66.js";import{S as Ie,L as ve,l as ge,a as me,C as ke}from"../chunks/loadingAnimation.7c1e3d49.js";function we(a){return a()}function De(a){a.forEach(we)}const H=[],ae=[],Q=[],se=[],_e=Promise.resolve();let Z=!1;function Ee(){Z||(Z=!0,_e.then(Ae))}function Ce(){return Ee(),_e}function Ve(a){Q.push(a)}const Y=new Set;let J=0;function Ae(){do{for(;J<H.length;){const a=H[J];J++,Se(a.$$)}for(H.length=0,J=0;ae.length;)ae.pop()();for(let a=0;a<Q.length;a+=1){const e=Q[a];Y.has(e)||(Y.add(e),e())}Q.length=0}while(H.length);for(;se.length;)se.pop()();Z=!1,Y.clear()}function Se(a){if(a.fragment!==null){a.update(),De(a.before_update);const e=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,e),a.after_update.forEach(Ve)}}const ze={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},F=(a,e)=>new CustomEvent(a,{detail:e});function je(a,e={}){const{root:r,rootMargin:l,threshold:t,unobserveOnEnter:i}=Object.assign(Object.assign({},ze),e);let s={x:void 0,y:void 0},n={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver<"u"&&a){const c=new IntersectionObserver((o,k)=>{o.forEach(m=>{s.y>m.boundingClientRect.y?n.vertical="up":n.vertical="down",s.x>m.boundingClientRect.x?n.horizontal="left":n.horizontal="right",s={y:m.boundingClientRect.y,x:m.boundingClientRect.x};const V={inView:m.isIntersecting,entry:m,scrollDirection:n,node:a,observer:k};a.dispatchEvent(F("change",V)),m.isIntersecting?(a.dispatchEvent(F("enter",V)),i&&k.unobserve(a)):a.dispatchEvent(F("leave",V))})},{root:r,rootMargin:l,threshold:t});return Ce().then(()=>{a.dispatchEvent(F("init",{observer:c,node:a}))}),c.observe(a),{destroy(){c.unobserve(a)}}}}var Ne=Le;function Le(a,e,r){var l=null,t=null,i=function(){l&&(clearTimeout(l),t=null,l=null)},s=function(){var c=t;i(),c&&c()},n=function(){if(!e)return a.apply(this,arguments);var c=this,o=arguments,k=r&&!l;if(i(),t=function(){a.apply(c,o)},l=setTimeout(function(){if(l=null,!k){var m=t;return t=null,m()}},e),k)return t()};return n.cancel=i,n.flush=s,n}function $e(a){let e,r,l,t,i,s,n,c,o,k,m,V,w,A,z,E,S,B;return{c(){e=b("div"),r=b("div"),l=b("div"),t=O("Search by"),i=j(),s=b("div"),n=b("div"),c=O("Card Name"),k=j(),m=b("div"),V=O("Artist Name"),A=j(),z=b("div"),E=b("input"),this.h()},l(u){e=y(u,"DIV",{class:!0});var g=I(e);r=y(g,"DIV",{class:!0});var p=I(r);l=y(p,"DIV",{class:!0});var v=I(l);t=M(v,"Search by"),v.forEach(d),i=N(p),s=y(p,"DIV",{class:!0});var h=I(s);n=y(h,"DIV",{class:!0});var P=I(n);c=M(P,"Card Name"),P.forEach(d),k=N(h),m=y(h,"DIV",{class:!0});var le=I(m);V=M(le,"Artist Name"),le.forEach(d),h.forEach(d),p.forEach(d),A=N(g),z=y(g,"DIV",{id:!0,class:!0});var re=I(z);E=y(re,"INPUT",{type:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),re.forEach(d),g.forEach(d),this.h()},h(){_(l,"class","toggleLabel svelte-u8hidz"),_(n,"class",o=$(a[0]==="name"?"toggleActive":"toggleInactive")+" svelte-u8hidz"),_(m,"class",w=$(a[0]==="artist"?"toggleActive":"toggleInactive")+" svelte-u8hidz"),_(s,"class","toggles svelte-u8hidz"),_(r,"class","searchToggle svelte-u8hidz"),_(E,"type","text"),_(E,"id","search-field"),_(E,"placeholder","Enter Search Term"),_(E,"autocomplete","off"),_(E,"class","svelte-u8hidz"),_(z,"id","search-input-cont"),_(z,"class","svelte-u8hidz"),_(e,"class","searchInputContainer svelte-u8hidz")},m(u,g){L(u,e,g),f(e,r),f(r,l),f(l,t),f(r,i),f(r,s),f(s,n),f(n,c),f(s,k),f(s,m),f(m,V),f(e,A),f(e,z),f(z,E),S||(B=[K(n,"click",a[3]),K(m,"click",a[4]),K(E,"input",a[1])],S=!0)},p(u,[g]){g&1&&o!==(o=$(u[0]==="name"?"toggleActive":"toggleInactive")+" svelte-u8hidz")&&_(n,"class",o),g&1&&w!==(w=$(u[0]==="artist"?"toggleActive":"toggleInactive")+" svelte-u8hidz")&&_(m,"class",w)},i:G,o:G,d(u){u&&d(e),S=!1,he(B)}}}function Oe(a,e,r){let{searchData:l}=e,t,i="name";const s=Ne(o=>{t=o.target.value,l(t,i),r(0,i)},750),n=()=>r(0,i="name"),c=()=>r(0,i="artist");return a.$$set=o=>{"searchData"in o&&r(2,l=o.searchData)},[i,s,l,n,c]}class Me extends x{constructor(e){super(),ee(this,e,Oe,$e,te,{searchData:2})}}function ie(a,e,r){const l=a.slice();return l[10]=e[r],l}function Pe(a){let e,r,l=a[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=oe(ie(a,l,s));const i=s=>C(t[s],1,1,()=>{t[s]=null});return{c(){e=b("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0});var n=I(e);for(let c=0;c<t.length;c+=1)t[c].l(n);n.forEach(d),this.h()},h(){_(e,"class","cardList svelte-1bjvvtg")},m(s,n){L(s,e,n);for(let c=0;c<t.length;c+=1)t[c].m(e,null);r=!0},p(s,n){if(n&2){l=s[1];let c;for(c=0;c<l.length;c+=1){const o=ie(s,l,c);t[c]?(t[c].p(o,n),D(t[c],1)):(t[c]=oe(o),t[c].c(),D(t[c],1),t[c].m(e,null))}for(W(),c=l.length;c<t.length;c+=1)i(c);X()}},i(s){if(!r){for(let n=0;n<l.length;n+=1)D(t[n]);r=!0}},o(s){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)C(t[n]);r=!1},d(s){s&&d(e),ye(t,s)}}}function Te(a){let e,r,l,t,i,s;return r=new ve({}),{c(){e=b("div"),T(r.$$.fragment),l=j(),t=b("div"),i=O("Loading..."),this.h()},l(n){e=y(n,"DIV",{class:!0});var c=I(e);U(r.$$.fragment,c),l=N(c),t=y(c,"DIV",{class:!0});var o=I(t);i=M(o,"Loading..."),o.forEach(d),c.forEach(d),this.h()},h(){_(t,"class",$(ge)+" svelte-1bjvvtg"),_(e,"class",$(me)+" svelte-1bjvvtg")},m(n,c){L(n,e,c),R(r,e,null),f(e,l),f(e,t),f(t,i),s=!0},p:G,i(n){s||(D(r.$$.fragment,n),s=!0)},o(n){C(r.$$.fragment,n),s=!1},d(n){n&&d(e),q(r)}}}function ce(a){let e,r;return e=new ke({props:{cardName:a[10].name,cardId:a[10].id,cardImageUrl:a[10].imageUrl,cardArtist:a[10].artist,cardSubtype:a[10].subtypes,cardColor:a[10].colorIdentity}}),{c(){T(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,t){R(e,l,t),r=!0},p(l,t){const i={};t&2&&(i.cardName=l[10].name),t&2&&(i.cardId=l[10].id),t&2&&(i.cardImageUrl=l[10].imageUrl),t&2&&(i.cardArtist=l[10].artist),t&2&&(i.cardSubtype=l[10].subtypes),t&2&&(i.cardColor=l[10].colorIdentity),e.$set(i)},i(l){r||(D(e.$$.fragment,l),r=!0)},o(l){C(e.$$.fragment,l),r=!1},d(l){q(e,l)}}}function oe(a){let e,r,l=a[10].imageUrl!==void 0&&ce(a);return{c(){l&&l.c(),e=ne()},l(t){l&&l.l(t),e=ne()},m(t,i){l&&l.m(t,i),L(t,e,i),r=!0},p(t,i){t[10].imageUrl!==void 0?l?(l.p(t,i),i&2&&D(l,1)):(l=ce(t),l.c(),D(l,1),l.m(e.parentNode,e)):l&&(W(),C(l,1,1,()=>{l=null}),X())},i(t){r||(D(l),r=!0)},o(t){C(l),r=!1},d(t){l&&l.d(t),t&&d(e)}}}function fe(a){let e,r,l,t,i,s;return r=new ve({}),{c(){e=b("div"),T(r.$$.fragment),l=j(),t=b("div"),i=O("Loading..."),this.h()},l(n){e=y(n,"DIV",{class:!0});var c=I(e);U(r.$$.fragment,c),l=N(c),t=y(c,"DIV",{class:!0});var o=I(t);i=M(o,"Loading..."),o.forEach(d),c.forEach(d),this.h()},h(){_(t,"class",$(ge)+" svelte-1bjvvtg"),_(e,"class",$(me)+" svelte-1bjvvtg")},m(n,c){L(n,e,c),R(r,e,null),f(e,l),f(e,t),f(t,i),s=!0},p:G,i(n){s||(D(r.$$.fragment,n),s=!0)},o(n){C(r.$$.fragment,n),s=!1},d(n){n&&d(e),q(r)}}}function ue(a){let e,r,l;return{c(){e=b("div"),r=b("div"),l=O("Viewing All Results"),this.h()},l(t){e=y(t,"DIV",{class:!0});var i=I(e);r=y(i,"DIV",{class:!0});var s=I(r);l=M(s,"Viewing All Results"),s.forEach(d),i.forEach(d),this.h()},h(){_(r,"class","viewingAll svelte-1bjvvtg"),_(e,"class","viewingAllContainer svelte-1bjvvtg")},m(t,i){L(t,e,i),f(e,r),f(r,l)},d(t){t&&d(e)}}}function de(a){let e,r,l;return{c(){e=b("div"),r=b("div"),l=O("Sorry, we couldn't retieve any data. Please try another search term or try refreshing the page."),this.h()},l(t){e=y(t,"DIV",{class:!0});var i=I(e);r=y(i,"DIV",{class:!0});var s=I(r);l=M(s,"Sorry, we couldn't retieve any data. Please try another search term or try refreshing the page."),s.forEach(d),i.forEach(d),this.h()},h(){_(r,"class","error svelte-1bjvvtg"),_(e,"class","errorContainer svelte-1bjvvtg")},m(t,i){L(t,e,i),f(e,r),f(r,l)},d(t){t&&d(e)}}}function Ue(a){let e,r,l,t,i,s,n,c,o,k,m,V,w,A,z;r=new Ie({}),t=new Me({props:{searchData:a[5]}});const E=[Te,Pe],S=[];function B(v,h){return v[0]===!0?0:v[1]!==void 0?1:-1}~(s=B(a))&&(n=S[s]=E[s](a));let u=a[4]===!0&&fe(),g=!a[2]&&ue(),p=a[3]&&de();return{c(){e=b("main"),T(r.$$.fragment),l=j(),T(t.$$.fragment),i=j(),n&&n.c(),c=j(),o=b("div"),k=j(),u&&u.c(),m=j(),g&&g.c(),V=j(),p&&p.c()},l(v){e=y(v,"MAIN",{});var h=I(e);U(r.$$.fragment,h),l=N(h),U(t.$$.fragment,h),i=N(h),n&&n.l(h),c=N(h),o=y(h,"DIV",{}),I(o).forEach(d),k=N(h),u&&u.l(h),m=N(h),g&&g.l(h),V=N(h),p&&p.l(h),h.forEach(d)},m(v,h){L(v,e,h),R(r,e,null),f(e,l),R(t,e,null),f(e,i),~s&&S[s].m(e,null),f(e,c),f(e,o),f(e,k),u&&u.m(e,null),f(e,m),g&&g.m(e,null),f(e,V),p&&p.m(e,null),w=!0,A||(z=[pe(je.call(null,o,{})),K(o,"change",a[6])],A=!0)},p(v,[h]){let P=s;s=B(v),s===P?~s&&S[s].p(v,h):(n&&(W(),C(S[P],1,1,()=>{S[P]=null}),X()),~s?(n=S[s],n?n.p(v,h):(n=S[s]=E[s](v),n.c()),D(n,1),n.m(e,c)):n=null),v[4]===!0?u?(u.p(v,h),h&16&&D(u,1)):(u=fe(),u.c(),D(u,1),u.m(e,m)):u&&(W(),C(u,1,1,()=>{u=null}),X()),v[2]?g&&(g.d(1),g=null):g||(g=ue(),g.c(),g.m(e,V)),v[3]?p||(p=de(),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(v){w||(D(r.$$.fragment,v),D(t.$$.fragment,v),D(n),D(u),w=!0)},o(v){C(r.$$.fragment,v),C(t.$$.fragment,v),C(n),C(u),w=!1},d(v){v&&d(e),q(r),q(t),~s&&S[s].d(),u&&u.d(),g&&g.d(),p&&p.d(),A=!1,he(z)}}}function Re(a,e,r){let l,t=[],i="",s="name",n=!0,c=!1,o=!1;const k=async(w,A)=>{r(3,c=!1);try{const E=await(await fetch("/api/GetCards",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({count:Math.floor(t.length/100)+1,nameSearchParam:w,searchType:A})})).json();w===i?r(1,t=[...t,...E]):r(1,t=[...E]),E.length<100?r(2,n=!1):r(2,n=!0),r(0,l=!1),r(4,o=!1)}catch{r(0,l=!1),r(4,o=!1),r(3,c=!0)}};return be(async()=>{r(0,l=!0),k("",s)}),[l,t,n,c,o,(w,A)=>{s=A,r(1,t=[]),r(0,l=!0),k(w,A),i=w},w=>{w.detail.inView&&n&&t.length>0&&(k(i,s),r(4,o=!0))}]}class qe extends x{constructor(e){super(),ee(this,e,Re,Ue,te,{})}}function Be(a){let e,r,l;return r=new qe({}),{c(){e=b("main"),T(r.$$.fragment)},l(t){e=y(t,"MAIN",{});var i=I(e);U(r.$$.fragment,i),i.forEach(d)},m(t,i){L(t,e,i),R(r,e,null),l=!0},p:G,i(t){l||(D(r.$$.fragment,t),l=!0)},o(t){C(r.$$.fragment,t),l=!1},d(t){t&&d(e),q(r)}}}class Je extends x{constructor(e){super(),ee(this,e,null,Be,te,{})}}export{Je as default};
